title: HTTPS Virtual Server
description: this is nice
parameters:
  tenant_name: demo
  virtual_address: 172.31.5.15
  member_1: 172.31.5.7
  member_2: 172.31.5.8
  app_n: demo-app
definitions: 
  tenant_name:
    title: Nombre Particion
    type: string
    description: partition on bigip
  virtual_address:
    title: Virtual IP Address
    description: Define la IP Virtual
  member_1:
    title: Primer miembro
  member_2:
    title: Segundo Miembro
  app_n:
    title: Nombre de la aplicacion
template: | 
  {
    "$schema": "https://raw.githubusercontent.com/F5Networks/f5-appsvcs-extension/master/schema/latest/as3-schema.json",
    "class": "AS3",
    "action": "deploy",
    "persist": true,
    "declaration": {
      "class": "ADC",
      "schemaVersion": "3.0.0",
      "id": "123abc",
      "label": "Sample 2",
      "remark": "HTTPS with predictive-node pool",
      "{{tenant_name}}": {
        "class": "Tenant",
        "{{app_n}}": {
          "class": "Application",
          "myservice": {
            "class": "Service_HTTPS",
            "virtualAddresses": [
              "{{virtual_address}}"
            ],
            "pool": "web_pool",
            "policyWAF": {
              "use": "demo_security"
             },
            "clientTLS": "client_webtls"
            "serverTLS": "server_webtls"
          },
          "web_pool": {
            "class": "Pool",
            "loadBalancingMode": "predictive-node",
            "monitors": [
              "http"
            ],
            "members": [
              {
                "servicePort": 80,
                "serverAddresses": [
                  "{{member_1}}",
                  "{{member_2}}"
                ]
              }
            ]
          },
          "client_webtls": {
            "class": "TLS_Server",
            "certificates": [
              {
                "certificate": "webcert"
              }
            ]
          },
          "webcert": {
            "class": "Certificate",
            "remark": "in practice we recommend using a passphrase",
            "certificate": "-----BEGIN CERTIFICATE-----\nMIICnDCCAgWgAwIBAgIJAJ5n2b0OCEjwMA0GCSqGSIb3DQEBCwUAMGcxCzAJBgNVBAYTAlVTMRMwEQYDVQQIDApXYXNoaW5ndG9uMRAwDgYDVQQHDAdTZWF0dGxlMRQwEgYDVQQKDAtmNV9OZXR3b3JrczEbMBkGA1UEAwwSc2FtcGxlLmV4YW1wbGUubmV0MB4XDTE3MTEyNjE5NTAyNFoXDTE4MDIyNTE5NTAyNFowZzELMAkGA1UEBhMCVVMxEzARBgNVBAgMCldhc2hpbmd0b24xEDAOBgNVBAcMB1NlYXR0bGUxFDASBgNVBAoMC2Y1X05ldHdvcmtzMRswGQYDVQQDDBJzYW1wbGUuZXhhbXBsZS5uZXQwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBALEsuXmSXVQpYjrZPW+WiTBjn491mwZYT7Q92V1HlSBtM6WdWlK1aZN5sovfKtOX7Yrm8xa+e4o/zJ2QYLyyv5O+t2EGN/4qUEjEAPY9mwJdfzRQy6Hyzm84J0QkTuUJ/EjNuPji3D0QJRALUTzu1UqqDCEtiN9OGyXEkh7uvb7BAgMBAAGjUDBOMB0GA1UdDgQWBBSVHPNrGWrjWyZvckQxFYWO59FRFjAfBgNVHSMEGDAWgBSVHPNrGWrjWyZvckQxFYWO59FRFjAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUAA4GBAJeJ9SEckEwPhkXOm+IuqfbUS/RcziifBCTmVyE+Fa/j9pKSYTgiEBNdbJeBEa+gPMlQtbV7Y2dy8TKx/8axVBHiXC5geDML7caxOrAyHYBpnx690xJTh5OIORBBM/a/NvaR+P3CoVebr/NPRh9oRNxnntnqvqD7SW0U3ZPe3tJc\n-----END CERTIFICATE-----",
            "privateKey": "-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: AES-256-CBC,D8FFCE6B255601587CB54EC29B737D31\n\nkv4Fc3Jn0Ujkj0yRjt+gQQfBLSNF2aRLUENXnlr7Xpzqu0Ahr3jS1bAAnd8IWnsR\nyILqVmKsYF2DoHh0tWiEAQ7/y/fe5DTFhK7N4Wml6kp2yVMkP6KC4ssyYPw27kjK\nDBwBZ5O8Ioej08A5sgsLCmglbmtSPHJUn14pQnMTmLOpEtOsu6S+2ibPgSNpdg0b\nCAJNG/KHe+Vkx59qNDyDeKb7FZOlsX30+y67zUq9GQqJEDuysPJ2BUNP0IJXAjst\nFIt1qNoZew+5KDYs7u/lPxcMGTirUhgI84Jy4WcDvSOsP/tKlxj04TbIE3epmSKy\n+TihHkwY7ngIGtcm3Sfqk5jz2RXoj1/Ac3SW8kVTYaOUogBhn7zAq4Wju6Et4hQG\nRGapsJp1aCeZ/a4RCDTxspcKoMaRa97/URQb0hBRGx3DGUhzpmX9zl7JI2Xa5D3R\nmdBXtjLKYJTdIMdd27prBEKhMUpae2rz5Mw4J907wZeBq/wu+zp8LAnecfTe2nGY\nE32x1U7gSEdYOGqnwxsOexb1jKgCa67Nw9TmcMPV8zmH7R9qdvgxAbAtwBl1F9OS\nfcGaC7epf1AjJLtaX7krWmzgASHl28Ynh9lmGMdv+5QYMZvKG0LOg/n3m8uJ6sKy\nIzzvaJswwn0j5P5+czyoV5CvvdCfKnNb+3jUEN8I0PPwjBGKr4B1ojwhogTM248V\nHR69D6TxFVMfGpyJhCPkbGEGbpEpcffpgKuC/mEtMqyDQXJNaV5HO6HgAJ9F1P6v\n5ehHHTMRvzCCFiwndHdlMXUjqSNjww6me6dr6LiAPbejdzhL2vWx1YqebOcwQx3G\n-----END RSA PRIVATE KEY-----",
            "passphrase": {
              "ciphertext": "ZjVmNQ==",
              "protected": "eyJhbGciOiJkaXIiLCJlbmMiOiJub25lIn0"
            }
          },
          "server_webtls": {
            "class": "TLS_Server",
            "certificates": [
              {
                "certificate": "server_webcert"
              }
            ]
          },
          "server_webcert": {
            "class": "Certificate",
            "remark": "in practice we recommend using a passphrase",
            "certificate": "-----BEGIN CERTIFICATE-----\nMIIDrjCCApagAwIBAgIEFy6xljANBgkqhkiG9w0BAQsFADCBmDELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAldBMRAwDgYDVQQHEwdTZWF0dGxlMRIwEAYDVQQKEwlNeUNvbXBhbnkxCzAJBgNVBAsTAklUMR4wHAYDVQQDExVsb2NhbGhvc3QubG9jYWxkb21haW4xKTAnBgkqhkiG9w0BCQEWGnJvb3RAbG9jYWxob3N0LmxvY2FsZG9tYWluMB4XDTIyMDQyOTIxNDgwNloXDTMyMDQyNjIxNDgwNlowgZgxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJXQTEQMA4GA1UEBxMHU2VhdHRsZTESMBAGA1UEChMJTXlDb21wYW55MQswCQYDVQQLEwJJVDEeMBwGA1UEAxMVbG9jYWxob3N0LmxvY2FsZG9tYWluMSkwJwYJKoZIhvcNAQkBFhpyb290QGxvY2FsaG9zdC5sb2NhbGRvbWFpbjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK7Bd1e7rZxlZxzgEkXkKCYCMuNTC4wwqJVFyva4XryVdj6sf8/yQp9yjbWTQ9BSlb/ynvR+ITTue2HTnkzBt50QdDGWgmR/tXEzqaUJP/A0vDCBWbB+k6/u7SUp1fK1zhyiQa27GGANa1rvDXxMqlzaw5DIUv8KwZts2pujMhK2VfhNxozZS0vJG3CPm65vz8SM/XQpb8WmgBg3ZC/HeG6OhC0wDVlGOnT5jW4eEcuM4PoayGy8nMHE4VZQ3K8s3pUYqoUw774gd1J1oFZmacZEVGs4v02JdX7kOXIecZcTRhgW3kkfaoQUSei+dSzJCHkv3px1ODQH7jM+UKlphTsCAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAl4i0rLEA48y40KWYW6Kl/npC3sQRHjWw9BjNJJ9FZtPXtbLyZZXflsBvFJqCnkKmZYygeDBs/Qyz5BZ9jQIobTbbOiIiMPyVJ1tPSfrpF3sCet84q9DkqKRkAu5IZfWslLg8jWeF57BXhZ8bmcaj9kqIGOQA6undtVYElwWf6Fq3AsrHmvDJRYWf00F82bsteXU8b6gyyqYbJWmIT9e+qkVj+sg1HoaLwXBeLGLchcN2IkGfP+ukncXwjhkTVdAW2LJUoofu5K1+oOTfy0P/i2gTPskIzn0w9anE3XN0kq+4fA1LAIZUd7AVnzXgduzG8kkIi/HNIKXm6ArDJRbjLA==\n-----END CERTIFICATE-----",
            "privateKey": "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCuwXdXu62cZWcc4BJF5CgmAjLjUwuMMKiVRcr2uF68lXY+rH/P8kKfco21k0PQUpW/8p70fiE07nth055MwbedEHQxloJkf7VxM6mlCT/wNLwwgVmwfpOv7u0lKdXytc4cokGtuxhgDWta7w18TKpc2sOQyFL/CsGbbNqbozIStlX4TcaM2UtLyRtwj5uub8/EjP10KW/FpoAYN2Qvx3hujoQtMA1ZRjp0+Y1uHhHLjOD6GshsvJzBxOFWUNyvLN6VGKqFMO++IHdSdaBWZmnGRFRrOL9NiXV+5DlyHnGXE0YYFt5JH2qEFEnovnUsyQh5L96cdTg0B+4zPlCpaYU7AgMBAAECggEAHHrSEL240vKhpc6Mm9BNjLgyA+MeUCgD6WPY6nFsmw4+mYMyRzjji6m3F37a/+Hdns0TA6RklARDnlNHCppNaq7qSMSPFoLLlpnFTWye+24Ut1D1RXKzbeohwrs5L1daskbtLjt+AvVc6BJqX7X806ohUgCbqg3eNI6+Z7vmZq8EhphZNA6MI4k9bqBXfV06pMiARF8jxhVm2rdW/ZQeMANJSSLVv2AK4jUAKsEemfUHCwAOp168+FjSmkXtk4sCPzgIDwI1TmDKyFUPl88lNqVjL9wNQ3L6GDRVftqJa0PQJMlODdyswY/RlLnORf627oJMOaFob4Sagt40tmo4IQKBgQDZpxDjLT83nOMWOahSzTJWeGDfv4PqaqYdZTu1m6jTdXe0nPMrbU2ytGXioGKQWgrVqDcW8sL9UTvjQ/bB09h0dZxT4n7CCV3uLfui/w+lx8LuuOwJjvopjfTmhUcujWsm1w0dYDJeev6GCyqPRDDljB3vTAZAz/3n1Mehjs6moQKBgQDNi5fa5AYsCJrnDYO6HbVdu6X1996flYeGFiA6xlT80OHCq4YGxNi6tEWFArJmod/JYXeBgSHk+KvqmDrH+RK4hRVQOQ8AqptRl29ovKx9aSQHxLO5swA/xcfRgCELK8JJTh1Hse+PmF6RN9jttxlIX0OzXqHBQj32/l31SDIKWwKBgQCj0yVZ6afIw1UGWJXC5WK7RVadc7jmTCoGvDkKRET6DVPx5aT/DgHKvhBmWZR21N+M3FXC9y0foPJz6KcmU798QT5OwY/pm0VRTtk2Yce0X7zxFM3NkAnqF0i77puahaWekYX0k4C2Ltu/p038kjY/wYySnuWiCSwzQKyWhTg0oQKBgCd2E1Ncz6qIhGSzfYSvy3ARZI1SZxUwOfKOMOXXyd03pQAgufx2sj01+trMZ7+4eCRLaAwe5Ij3DNpfG3nk4ak3M55RNgYkuujxL9xlzJ/PHbG4G+Ec8oFL0U7xUGa6ofQ84PYwvRNOZ2lt1WHd8yan03GOS3O06fyPXS6IC8NdAoGAHEsZV4CdFQB5cl9Q9UXFiqTyFO38zKaazE2FoT4szQG+u4utSnTMGNhe/RCipmLap8D45PFj8xul3Yynw+7u+h8DQLAJetC9OJ3T16BHVF3yANko3Snnw4aPw/XyKritvMWLuqfR+pJLRx3Gr7fCck508fGDdaKmJp0e2WtCihw=\n-----END PRIVATE KEY-----"
          },
          "demo_security": {
              "class": "WAF_Policy",
              "url": "https://raw.githubusercontent.com/jtorresa61/bigip-automation/main/WAF/demo_security2.xml",
              "ignoreChanges": true
          }
        }
      }
    }
  }